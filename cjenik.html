<!DOCTYPE html>
<html lang="hr">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>protech</title>
    <link rel="icon" type="image/x-icon" href="slike/favicon.ico">
    <meta name="description" content="Rješavanje softverskih i hardverskih problema extraordinare.">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="css/styles.css">
</head>

<body class="body">
    <header class="header">
        <div class="logo_image">
            <a href="index.html"><img src="slike/protech.svg" class="logo" alt="ProTech logo" height="120"
                    width="200"></a>
        </div>
        <h3 id="moto">Rješavanje softverskih i hardverskih problema extraordinaire.</h3>
        <nav>
            <ul id="main_nav">
                <li><a href="index.html">Home</a></li>
                <li><a href="primjeri.html">Portfolio</a></li>
                <li><a href="cjenik.html" class="active">Cjenik</a></li>
                <li><a href="about.html">O nama</a></li>
                <li><a href="kontakt.html">Kontakt</a></li>

            </ul>
        </nav>

    </header>

    <br>

    <main>
        <section class="content">
            <h1>Naše Usluge</h1><br>
            <p>Nudimo širok spektar IT usluga prilagođenih jedinstvenim potrebama naših klijenata. Ispod su neke od
                naših primjernih usluga i njihove cijene.</p><br>
            <label for="currency">Odaberite valutu:</label>
            <select id="currency">
                <option value="EUR">EUR</option>
                <option value="USD">USD</option>
                <option value="GBP">GBP</option>
                <!-- <option value="HRK">HRK</option> -->
                <!-- Dodajte još valuta po potrebi -->
            </select>
            <table>
                <thead>
                    <tr>
                        <th>Usluga</th>
                        <th>Cijena (<span id="currency-symbol">€</span>)</th>
                    </tr>
                </thead>
                <tbody id="services-table">
                    <tr>
                        <td>Razvoj Web Stranica</td>
                        <td class="price" data-price="1500">1500</td>
                    </tr>
                    <tr>
                        <td>Razvoj Mobilnih Aplikacija</td>
                        <td class="price" data-price="3000">3000</td>
                    </tr>
                    <tr>
                        <td>Cloud Rješenja</td>
                        <td class="price" data-price="2000">2000</td>
                    </tr>
                    <tr>
                        <td>IT Savjetovanje</td>
                        <td class="price" data-price="100">100/sat</td>
                    </tr>
                    <tr>
                        <td>Cybersecurity Usluge</td>
                        <td class="price" data-price="2500">2500</td>
                    </tr>
                    <tr>
                        <td>Analiza Podataka</td>
                        <td class="price" data-price="1800">1800</td>
                    </tr>
                    <tr>
                        <td>Razvoj Prilagođenog Softvera</td>
                        <td class="price" data-price="4000">4000</td>
                    </tr>
                    <tr>
                        <td>Postavljanje Mreže</td>
                        <td class="price" data-price="800">800</td>
                    </tr>
                    <tr>
                        <td>Tehnička Podrška</td>
                        <td class="price" data-price="50">50/sat</td>
                    </tr>
                    <tr>
                        <td>SEO Usluge</td>
                        <td class="price" data-price="1200">1200</td>
                    </tr>
                    <tr>
                        <td>Managed IT Usluge</td>
                        <td class="price" data-price="2500">2500/mjesečno</td>
                    </tr>
                    <tr>
                        <td>IT Obuka</td>
                        <td class="price" data-price="500">500/dan</td>
                    </tr>
                </tbody>
            </table>
        </section>
    </main>

    <script src="js/footer.js"></script>

    <script>
        document.getElementById('currency').addEventListener('change', function () {
            const currency = this.value;
            const apiUrl = 'https://api.hnb.hr/tecajn-eur/v3';
            // Proxy server korišten zbog CORS-a.
            // Prije testiranja potrebno ručno otvoriti URL u browseru i kliknuti na button "Request temporary access to the demo server."
            const proxyUrl = 'https://cors-anywhere.herokuapp.com/';

            fetch(proxyUrl + apiUrl)
                .then(response => response.json())
                .then(data => {
                    const rates = parseRates(data);
                    const conversionRate = rates[currency];
                    updatePrices(conversionRate, currency);
                })
                .catch(error => console.error('Error fetching exchange rates:', error));
        });

        function parseRates(data) {
            const rates = {};
            data.forEach(rate => {
                rates[rate.valuta] = parseFloat(rate.srednji_tecaj.replace(',', '.'));
            });
            return rates;
        }

        function updatePrices(rate, currency) {

            console.log("rate: " + rate);
            
            if (rate == undefined) {
                rate = 1.0;
            }

            const prices = document.querySelectorAll('.price');
            prices.forEach(priceElement => {
                const basePrice = parseFloat(priceElement.getAttribute('data-price'));
                const convertedPrice = (basePrice * rate).toFixed(2);
                priceElement.textContent = `${convertedPrice} ${currency}`;
            });

            const currencySymbols = {
                'USD': '$',
                'EUR': '€',
                'GBP': '£',
            };
            document.getElementById('currency-symbol').textContent = currencySymbols[currency] || currency;
        }
    </script>
</body>

</html>